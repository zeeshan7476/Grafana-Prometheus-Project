#!/bin/bash

# Update system and install Docker if needed
sudo apt-get update

# Add user to Docker group
sudo usermod -aG docker $USER
newgrp docker

# Add Helm repos
helm repo add prometheus-community https://prometheus-community.github.io/helm-charts
helm repo add stable https://charts.helm.sh/stable
helm repo update

# Create namespace
kubectl create namespace monitoring

# Install kube-prometheus-stack with NodePorts
helm install kind-prometheus prometheus-community/kube-prometheus-stack \
  --namespace monitoring \
  --values monitoring/values.yaml
